# development flow

## 目的
- 仕様変更から実装完了までの標準フローを定義し、作業順序と完了条件を統一する。

## 対象範囲
- `docs/specification/` の仕様変更
- `data/` のデータ変更
- `sim/` の検証変更
- `godot/` の実装変更
- `CHANGELOG.md` を含む関連文書更新

## 本文
- 開発は `specification -> data -> sim -> godot` の順で進める。
- 仕様と実装が不一致の場合は、先に仕様を更新してから実装を修正する。
- バランス調整やロジック変更は、実装前に `sim/` で再現可能な検証条件を用意する。
- 変更理由、影響範囲、未解決事項は文書に明記し、推測で確定しない。

## 手順
1. 仕様更新
- 変更対象を `docs/specification/` に反映する。
- 用語追加が必要な場合は `docs/policy/glossary.md` を更新する。

2. データ更新
- 仕様に合わせて `data/` を更新する。
- データ項目の追加・削除・型変更を確認し、互換性への影響を明記する。

3. シミュレーション検証
- `sim/` で再現手順と評価観点を定義する。
- 少なくとも 1 つの期待結果を数値または状態で明示する。

4. 実装更新
- `godot/` の実装を更新する。
- 仕様との差分が発生した場合は、仕様側の記述を先に修正する。

5. レビュー
- `docs/codex/review-checklist.md` で自己点検する。
- 変更理由、影響範囲、検証結果が追跡可能か確認する。

6. 変更記録
- プレイ体験や仕様に影響する変更は `CHANGELOG.md` に追記する。
- 同時に更新した文書をコミットメッセージで明示する。

## 検証方法
- 変更内容に対応する仕様、データ、実装、履歴が全て更新済みであることを確認する。
- 第三者が同じ手順で変更意図を追跡できることを確認する。